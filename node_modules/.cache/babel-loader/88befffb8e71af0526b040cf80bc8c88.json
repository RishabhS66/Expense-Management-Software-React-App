{"ast":null,"code":"var _jsxFileName = \"/Users/rissriva/Desktop/ExpenseManagementSystem/ExpenseManagement/frontend/src/components/Approval/Approvals.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { Card, Button, Col, ProgressBar } from \"react-bootstrap\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\nimport ToolkitProvider, { Search } from \"react-bootstrap-table2-toolkit\";\nimport ApprovalHeader from \"./ApprovalHeader\";\nimport { useDispatch } from \"react-redux\";\nimport { useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useState } from \"react\";\nimport { useReactToPrint } from 'react-to-print';\nimport { useRef } from \"react\";\nimport { getSubmittedExpenses, updateExpenseState } from \"../../actions/expense.actions\";\nimport ViewExpense from \"./ViewExpense\";\nimport { Modal } from \"bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Approvals = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(getSubmittedExpenses()).then(() => {\n      console.log(\"Got Submitted Expenses\");\n    }).catch(() => {\n      // openToast();\n      console.log(\"Not got Submitted Expenses\");\n    });\n  }, [dispatch]);\n\n  const viewButton = id => {\n    return /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"secondary\",\n      onClick: handleShow,\n      id: id,\n      children: \"View Details\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this);\n  };\n\n  const SortCaret = (order, column) => {\n    if (!order) return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"float-end\",\n      children: /*#__PURE__*/_jsxDEV(\"font\", {\n        color: \"grey\",\n        children: [\"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-caret-up-fill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-caret-down-fill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this);else if (order === \"asc\") return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"float-end\",\n      children: [\"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"bi bi-caret-up-fill\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"font\", {\n        color: \"grey\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-caret-down-fill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this);else if (order === \"desc\") return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"float-end\",\n      children: [\"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"font\", {\n        color: \"grey\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-caret-up-fill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"bi bi-caret-down-fill\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this);\n    return null;\n  };\n\n  const onApprove = e => {\n    const payload = {\n      status: \"APPROVED\"\n    };\n    console.log(\"APPROVED\");\n    dispatch(updateExpenseState(e.target.id, payload)).then(() => {\n      dispatch(getSubmittedExpenses()).then(() => {\n        console.log(\"Approved, and expenses fetched successfully\");\n      }).catch(() => {\n        console.log(\"Unable to fetch expenses\");\n      });\n    }).catch(() => {\n      // openToast();\n      console.log(\"OK\");\n    });\n  };\n\n  const onReject = e => {\n    const payload = {\n      status: \"REJECTED\"\n    };\n    console.log(\"REJECTED\");\n    dispatch(updateExpenseState(e.target.id, payload)).then(() => {\n      dispatch(getSubmittedExpenses()).then(() => {\n        console.log(\"Rejected, and expenses fetched successfully\");\n      }).catch(() => {\n        console.log(\"Unable to fetch expenses\");\n      });\n    }).catch(() => {\n      // openToast();\n      console.log(\"OK\");\n    });\n  };\n\n  const initExp = {\n    amount: 0,\n    attachments: [],\n    billable: true,\n    currency: \"INR\",\n    date: \"\",\n    description: \"\",\n    employee: {\n      firstName: \"\",\n      id: -1,\n      lastName: \"\"\n    },\n    expenseId: -1,\n    name: \"\",\n    paymentMethod: \"\",\n    project: {\n      projectName: \"\",\n      projectManager: {\n        firstName: \"\",\n        lastName: \"\"\n      }\n    },\n    reimburseable: true,\n    status: \"SUBMITTED\",\n    tax: 0,\n    taxZone: \"IND\"\n  };\n  const {\n    expensesSubmitted: content\n  } = useSelector(state => state.expenseByStatus);\n  const {\n    user\n  } = useSelector(state => state.auth);\n  const [show, setShow] = useState(false);\n\n  const handleShow = e => {\n    setShow(true);\n    const index = content.findIndex(o => o.expenseId.toString() === e.target.id.toString());\n    setExpData(content[index]);\n  };\n\n  const handleClose = () => {\n    setShow(false);\n  };\n\n  const [expData, setExpData] = useState(initExp);\n\n  const approveButton = id => {\n    return /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"success\",\n      onClick: onApprove,\n      id: id,\n      children: \"Approve\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this);\n  };\n\n  const rejectButton = id => {\n    return /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"danger\",\n      onClick: onReject,\n      id: id,\n      children: \"Reject\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this);\n  };\n\n  const billableBar = (billable, amt) => {\n    const billablePercent = Number(billable) / Number(amt) * 100.0;\n    const nonBillablePercent = 100.0 - billablePercent;\n    const nonBillable = Number(amt) - Number(billable);\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(ProgressBar, {\n        children: [/*#__PURE__*/_jsxDEV(ProgressBar, {\n          variant: \"warning\",\n          now: billablePercent,\n          label: \"Billable\"\n        }, 1, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProgressBar, {\n          variant: \"primary\",\n          now: nonBillablePercent,\n          label: \"Non-Billable\"\n        }, 2, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Billable:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this), \" \", Number(billable).toFixed(2), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Non-Billable:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this), \" \", Number(nonBillable).toFixed(2)]\n    }, void 0, true);\n  };\n\n  const expenseData = content.filter(exp => exp.employee.id !== user.id).map(exp => {\n    const expData = {\n      expId: exp.expenseId,\n      empName: exp.employee.firstName + \" \" + exp.employee.lastName,\n      date: exp.date,\n      amt: exp.currency + \" \" + exp.amount,\n      bar: /*#__PURE__*/_jsxDEV(\"center\", {\n        children: billableBar(exp.amount, exp.amount)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 14\n      }, this),\n      viewDetails: /*#__PURE__*/_jsxDEV(\"center\", {\n        children: viewButton(exp.expenseId)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 22\n      }, this),\n      approve: /*#__PURE__*/_jsxDEV(\"center\", {\n        children: approveButton(exp.expenseId)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 18\n      }, this),\n      reject: /*#__PURE__*/_jsxDEV(\"center\", {\n        children: rejectButton(exp.expenseId)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }, this)\n    };\n    return expData;\n  });\n  const columns = [{\n    dataField: \"expId\",\n    text: \"Expense ID\",\n    sort: true,\n    sortCaret: SortCaret // headerStyle: (colum, colIndex) => {\n    //   return { width: \"9rem\" };\n    // },\n\n  }, {\n    dataField: \"empName\",\n    text: \"Employee Name\",\n    sort: true,\n    sortCaret: SortCaret // headerStyle: (colum, colIndex) => {\n    //   return { width: \"13rem\" };\n    // },\n\n  }, {\n    dataField: \"date\",\n    text: \"Date\",\n    sort: true,\n    sortCaret: SortCaret // headerStyle: (colum, colIndex) => {\n    //   return { width: \"7rem\" };\n    // },\n\n  }, {\n    dataField: \"amt\",\n    text: \"Amount\",\n    sort: true,\n    sortCaret: SortCaret // headerStyle: (colum, colIndex) => {\n    //   return { width: \"9rem\" };\n    // },\n\n  }, {\n    dataField: \"bar\",\n    text: \"Billable/Non-Billable\",\n    headerStyle: (colum, colIndex) => {\n      return {\n        width: \"25rem\"\n      };\n    }\n  }, {\n    dataField: \"viewDetails\",\n    text: \"\" // headerStyle: (colum, colIndex) => {\n    //   return { width: \"8rem\" };\n    // },\n\n  }, {\n    dataField: \"approve\",\n    text: \"\" // headerStyle: (colum, colIndex) => {\n    //   return { width: \"7rem\" };\n    // },\n\n  }, {\n    dataField: \"reject\",\n    text: \"\" // headerStyle: (colum, colIndex) => {\n    //   return { width: \"7rem\" };\n    // },\n\n  }];\n  const componentRef = useRef();\n  const handlePrint = useReactToPrint({\n    content: () => componentRef.current\n  });\n  const {\n    SearchBar\n  } = Search;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ApprovalHeader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      style: {\n        width: \"95%\"\n      },\n      className: \"ms-5\",\n      children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n        as: \"h4\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dark\",\n            children: \"EXPENSE APPROVAL\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: /*#__PURE__*/_jsxDEV(ToolkitProvider, {\n          keyField: \"expId\",\n          data: expenseData,\n          columns: columns,\n          search: true,\n          children: props => /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n              id: \"searchbar\",\n              ...props.searchProps,\n              srText: \"Search Expenses :\",\n              placeholder: \"Enter text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(BootstrapTable, {\n              keyField: \"expId\",\n              ...props.baseProps,\n              hover: true,\n              pagination: paginationFactory(),\n              noDataIndication: \"No data available in the table for you\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: componentRef,\n        children: [\"Hello\", /*#__PURE__*/_jsxDEV(Modal, {\n          onHide: handleClose,\n          show: show,\n          size: \"xl\",\n          backdrop: \"static\",\n          children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n            children: \"Hello\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n            children: \"Nice\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n            children: \"Woah\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Approvals, \"HHfKbO1YH2B67vHQBoTVlmuDDtM=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useReactToPrint];\n});\n\n_c = Approvals;\nexport default Approvals;\n\nvar _c;\n\n$RefreshReg$(_c, \"Approvals\");","map":{"version":3,"sources":["/Users/rissriva/Desktop/ExpenseManagementSystem/ExpenseManagement/frontend/src/components/Approval/Approvals.js"],"names":["React","Card","Button","Col","ProgressBar","BootstrapTable","paginationFactory","ToolkitProvider","Search","ApprovalHeader","useDispatch","useEffect","useSelector","useState","useReactToPrint","useRef","getSubmittedExpenses","updateExpenseState","ViewExpense","Modal","Approvals","dispatch","then","console","log","catch","viewButton","id","handleShow","SortCaret","order","column","onApprove","e","payload","status","target","onReject","initExp","amount","attachments","billable","currency","date","description","employee","firstName","lastName","expenseId","name","paymentMethod","project","projectName","projectManager","reimburseable","tax","taxZone","expensesSubmitted","content","state","expenseByStatus","user","auth","show","setShow","index","findIndex","o","toString","setExpData","handleClose","expData","approveButton","rejectButton","billableBar","amt","billablePercent","Number","nonBillablePercent","nonBillable","toFixed","expenseData","filter","exp","map","expId","empName","bar","viewDetails","approve","reject","columns","dataField","text","sort","sortCaret","headerStyle","colum","colIndex","width","componentRef","handlePrint","current","SearchBar","props","searchProps","baseProps"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Card, Button, Col, ProgressBar } from \"react-bootstrap\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\nimport ToolkitProvider, { Search } from \"react-bootstrap-table2-toolkit\";\nimport ApprovalHeader from \"./ApprovalHeader\";\nimport { useDispatch } from \"react-redux\";\nimport { useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useState } from \"react\";\nimport { useReactToPrint } from 'react-to-print';\nimport { useRef } from \"react\";\nimport {\n  getSubmittedExpenses,\n  updateExpenseState,\n} from \"../../actions/expense.actions\";\nimport ViewExpense from \"./ViewExpense\";\nimport { Modal } from \"bootstrap\";\n\nconst Approvals = () => {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(getSubmittedExpenses())\n      .then(() => {\n        console.log(\"Got Submitted Expenses\");\n      })\n      .catch(() => {\n        // openToast();\n        console.log(\"Not got Submitted Expenses\");\n      });\n  }, [dispatch]);\n\n  const viewButton = (id) => {\n    return (\n      <Button variant=\"secondary\" onClick={handleShow} id={id}>\n        View Details\n      </Button>\n    );\n  };\n\n  const SortCaret = (order, column) => {\n    if (!order)\n      return (\n        <span className=\"float-end\">\n          <font color=\"grey\">\n            &nbsp;&nbsp;<i className=\"bi bi-caret-up-fill\"></i>\n            <i className=\"bi bi-caret-down-fill\"></i>\n          </font>\n        </span>\n      );\n    else if (order === \"asc\")\n      return (\n        <span className=\"float-end\">\n          &nbsp;&nbsp;<i className=\"bi bi-caret-up-fill\"></i>\n          <font color=\"grey\">\n            <i className=\"bi bi-caret-down-fill\"></i>\n          </font>\n        </span>\n      );\n    else if (order === \"desc\")\n      return (\n        <span className=\"float-end\">\n          &nbsp;&nbsp;\n          <font color=\"grey\">\n            <i className=\"bi bi-caret-up-fill\"></i>\n          </font>\n          <i className=\"bi bi-caret-down-fill\"></i>\n        </span>\n      );\n    return null;\n  };\n\n  const onApprove = (e) => {\n    const payload = {\n      status: \"APPROVED\",\n    };\n    console.log(\"APPROVED\");\n    dispatch(updateExpenseState(e.target.id, payload))\n      .then(() => {\n        dispatch(getSubmittedExpenses())\n          .then(() => {\n            console.log(\"Approved, and expenses fetched successfully\");\n          })\n          .catch(() => {\n            console.log(\"Unable to fetch expenses\");\n          });\n      })\n      .catch(() => {\n        // openToast();\n        console.log(\"OK\");\n      });\n  };\n\n  const onReject = (e) => {\n    const payload = {\n      status: \"REJECTED\",\n    };\n    console.log(\"REJECTED\");\n    dispatch(updateExpenseState(e.target.id, payload))\n      .then(() => {\n        dispatch(getSubmittedExpenses())\n          .then(() => {\n            console.log(\"Rejected, and expenses fetched successfully\");\n          })\n          .catch(() => {\n            console.log(\"Unable to fetch expenses\");\n          });\n      })\n      .catch(() => {\n        // openToast();\n        console.log(\"OK\");\n      });\n  };\n  const initExp = {\n    amount: 0,\n    attachments: [],\n    billable: true,\n    currency: \"INR\",\n    date: \"\",\n    description: \"\",\n    employee: { firstName: \"\", id: -1, lastName: \"\" },\n    expenseId: -1,\n    name: \"\",\n    paymentMethod: \"\",\n    project: { projectName: \"\" , projectManager: {firstName:\"\", lastName: \"\"}},\n    reimburseable: true,\n    status: \"SUBMITTED\",\n    tax: 0,\n    taxZone: \"IND\",\n  };\n  const { expensesSubmitted: content } = useSelector(\n    (state) => state.expenseByStatus\n  );\n  const { user } = useSelector((state) => state.auth);\n  const [show, setShow] = useState(false);\n  const handleShow = (e) => {\n    setShow(true);\n    const index = content.findIndex(\n      (o) => o.expenseId.toString() === e.target.id.toString()\n    );\n    setExpData(content[index]);\n  };\n  const handleClose = () => {\n    setShow(false);\n  };\n  const [expData, setExpData] = useState(initExp);\n\n  const approveButton = (id) => {\n    return (\n      <Button variant=\"success\" onClick={onApprove} id={id}>\n        Approve\n      </Button>\n    );\n  };\n\n  const rejectButton = (id) => {\n    return (\n      <Button variant=\"danger\" onClick={onReject} id={id}>\n        Reject\n      </Button>\n    );\n  };\n\n  const billableBar = (billable, amt) => {\n    const billablePercent = (Number(billable) / Number(amt)) * 100.0;\n    const nonBillablePercent = 100.0 - billablePercent;\n    const nonBillable = Number(amt) - Number(billable);\n    return (\n      <>\n        <ProgressBar>\n          <ProgressBar\n            variant=\"warning\"\n            now={billablePercent}\n            label=\"Billable\"\n            key={1}\n          />\n          <ProgressBar\n            variant=\"primary\"\n            now={nonBillablePercent}\n            label=\"Non-Billable\"\n            key={2}\n          />\n        </ProgressBar>\n        <strong>Billable:</strong> {Number(billable).toFixed(2)}{\" \"}\n        <strong>Non-Billable:</strong> {Number(nonBillable).toFixed(2)}\n      </>\n    );\n  };\n\n  const expenseData = content\n    .filter((exp) => exp.employee.id !== user.id)\n    .map((exp) => {\n      const expData = {\n        expId: exp.expenseId,\n        empName: exp.employee.firstName + \" \" + exp.employee.lastName,\n        date: exp.date,\n        amt: exp.currency + \" \" + exp.amount,\n        bar: <center>{billableBar(exp.amount, exp.amount)}</center>,\n        viewDetails: <center>{viewButton(exp.expenseId)}</center>,\n        approve: <center>{approveButton(exp.expenseId)}</center>,\n        reject: <center>{rejectButton(exp.expenseId)}</center>,\n      };\n      return expData;\n    });\n\n  const columns = [\n    {\n      dataField: \"expId\",\n      text: \"Expense ID\",\n      sort: true,\n      sortCaret: SortCaret,\n      // headerStyle: (colum, colIndex) => {\n      //   return { width: \"9rem\" };\n      // },\n    },\n    {\n      dataField: \"empName\",\n      text: \"Employee Name\",\n      sort: true,\n      sortCaret: SortCaret,\n      // headerStyle: (colum, colIndex) => {\n      //   return { width: \"13rem\" };\n      // },\n    },\n    {\n      dataField: \"date\",\n      text: \"Date\",\n      sort: true,\n      sortCaret: SortCaret,\n      // headerStyle: (colum, colIndex) => {\n      //   return { width: \"7rem\" };\n      // },\n    },\n    {\n      dataField: \"amt\",\n      text: \"Amount\",\n      sort: true,\n      sortCaret: SortCaret,\n      // headerStyle: (colum, colIndex) => {\n      //   return { width: \"9rem\" };\n      // },\n    },\n    {\n      dataField: \"bar\",\n      text: \"Billable/Non-Billable\",\n      headerStyle: (colum, colIndex) => {\n        return { width: \"25rem\" };\n      },\n    },\n    {\n      dataField: \"viewDetails\",\n      text: \"\",\n      // headerStyle: (colum, colIndex) => {\n      //   return { width: \"8rem\" };\n      // },\n    },\n    {\n      dataField: \"approve\",\n      text: \"\",\n      // headerStyle: (colum, colIndex) => {\n      //   return { width: \"7rem\" };\n      // },\n    },\n    {\n      dataField: \"reject\",\n      text: \"\",\n      // headerStyle: (colum, colIndex) => {\n      //   return { width: \"7rem\" };\n      // },\n    },\n  ];\n\n  const componentRef = useRef();\n  const handlePrint = useReactToPrint({\n    content: () => componentRef.current,\n  });\n\n  const { SearchBar } = Search;\n\n  return (\n    <>\n      <ApprovalHeader />\n      <Card style={{ width: \"95%\" }} className=\"ms-5\">\n        <Card.Header as=\"h4\">\n          <Col>\n            <div className=\"dark\">EXPENSE APPROVAL</div>\n          </Col>\n        </Card.Header>\n        <Card.Body>\n          <ToolkitProvider\n            keyField=\"expId\"\n            data={expenseData}\n            columns={columns}\n            search\n          >\n            {(props) => (\n              <div>\n                <SearchBar\n                  id=\"searchbar\"\n                  {...props.searchProps}\n                  srText=\"Search Expenses :\"\n                  placeholder=\"Enter text\"\n                />\n                <br />\n                <BootstrapTable\n                  keyField=\"expId\"\n                  {...props.baseProps}\n                  hover\n                  pagination={paginationFactory()}\n                  noDataIndication=\"No data available in the table for you\"\n                />\n              </div>\n            )}\n          </ToolkitProvider>\n        </Card.Body>\n        <div ref={componentRef}>\n          Hello\n          <Modal onHide={handleClose} show={show} size=\"xl\" backdrop=\"static\">\n            <Modal.Header>Hello</Modal.Header>\n            <Modal.Body>Nice</Modal.Body>\n            <Modal.Footer>Woah</Modal.Footer>\n          </Modal>\n        {/* <ViewExpense show={show} onHide={handleClose} data={expData} onPrint = {handlePrint} /> */}\n        </div>\n      </Card>\n    </>\n  );\n};\n\nexport default Approvals;\n"]},"metadata":{},"sourceType":"module"}