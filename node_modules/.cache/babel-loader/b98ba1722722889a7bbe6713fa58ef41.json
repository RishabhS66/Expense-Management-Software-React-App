{"ast":null,"code":"var _jsxFileName = \"/Users/rissriva/Desktop/ExpenseManagementSystem/ExpenseManagement/frontend/src/components/Approval/Approvals.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { Navbar, Card, Button, Badge, Dropdown, Row, Col } from \"react-bootstrap\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\nimport ToolkitProvider, { Search } from \"react-bootstrap-table2-toolkit\";\nimport ApprovalHeader from \"./ApprovalHeader\";\nimport { useDispatch } from \"react-redux\";\nimport { useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { getSubmittedExpenses, updateExpenseState } from \"../../actions/expense.actions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Approvals = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(getSubmittedExpenses()).then(() => {\n      console.log(\"Got Submitted Expenses\");\n    }).catch(() => {\n      // openToast();\n      console.log(\"Not got Submitted Expenses\");\n    });\n  }, [dispatch]);\n\n  const viewButton = id => {\n    return /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"secondary\",\n      id: id,\n      children: \"View Invoice\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this);\n  };\n\n  const SortCaret = (order, column) => {\n    if (!order) return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"float-end\",\n      children: /*#__PURE__*/_jsxDEV(\"font\", {\n        color: \"grey\",\n        children: [\"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-caret-up-fill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-caret-down-fill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this);else if (order === \"asc\") return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"float-end\",\n      children: [\"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"bi bi-caret-up-fill\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"font\", {\n        color: \"grey\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-caret-down-fill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this);else if (order === \"desc\") return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"float-end\",\n      children: [\"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"font\", {\n        color: \"grey\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-caret-up-fill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"bi bi-caret-down-fill\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this);\n    return null;\n  };\n\n  const onApprove = e => {\n    const payload = {\n      \"status\": \"APPROVED\"\n    };\n    console.log(\"APPROVED\");\n    dispatch(updateExpenseState(e.target.id, payload)).then(() => {\n      dispatch(getSubmittedExpenses()).then(() => {\n        console.log(\"Approved, and expenses fetched successfully\");\n      }).catch(() => {\n        console.log(\"Unable to fetch expenses\");\n      });\n    }).catch(() => {\n      // openToast();\n      console.log(\"OK\");\n    });\n  };\n\n  const onReject = e => {\n    const payload = {\n      \"status\": \"REJECTED\"\n    };\n    console.log(\"REJECTED\");\n    dispatch(updateExpenseState(e.target.id, payload)).then(() => {\n      dispatch(getSubmittedExpenses()).then(() => {\n        console.log(\"Rejected, and expenses fetched successfully\");\n      }).catch(() => {\n        console.log(\"Unable to fetch expenses\");\n      });\n    }).catch(() => {\n      // openToast();\n      console.log(\"OK\");\n    });\n  };\n\n  const {\n    expensesSubmitted: content\n  } = useSelector(state => state.expenseByStatus);\n  const {\n    user\n  } = useSelector(state => state.auth);\n  console.log(\"ConTent->\");\n  console.log(content);\n\n  const approveButton = (id, empId, cId) => {\n    return /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"success\",\n      onClick: onApprove,\n      id: id,\n      disabled: empId === cId,\n      children: \"Approve\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this);\n  };\n\n  const rejectButton = (id, empId, cId) => {\n    return /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"danger\",\n      onClick: onReject,\n      id: id,\n      disabled: empId === cId,\n      children: \"Reject\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this);\n  };\n\n  const expenseData = content.map(exp => {\n    const expData = {\n      expId: exp.expenseId,\n      empName: exp.employee.firstName + \" \" + exp.employee.lastName,\n      date: exp.date,\n      descpt: exp.description,\n      amt: exp.currency + \" \" + exp.amount,\n      viewDetails: /*#__PURE__*/_jsxDEV(\"center\", {\n        children: viewButton(exp)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 20\n      }, this),\n      approve: /*#__PURE__*/_jsxDEV(\"center\", {\n        children: approveButton(exp.expenseId, exp.employee.id, user.id)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 16\n      }, this),\n      reject: /*#__PURE__*/_jsxDEV(\"center\", {\n        children: rejectButton(exp.expenseId, exp.employee.id, user.id)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 15\n      }, this)\n    };\n    return expData;\n  });\n  const columns = [{\n    dataField: \"expId\",\n    text: \"Expense ID\",\n    sort: true,\n    sortCaret: SortCaret\n  }, {\n    dataField: \"empName\",\n    text: \"Employee Name\",\n    sort: true,\n    sortCaret: SortCaret\n  }, {\n    dataField: \"date\",\n    text: \"Expense Date\",\n    sort: true,\n    sortCaret: SortCaret\n  }, {\n    dataField: \"descpt\",\n    text: \"Description\",\n    sort: true,\n    sortCaret: SortCaret\n  }, {\n    dataField: \"amt\",\n    text: \"Amount\",\n    sort: true,\n    sortCaret: SortCaret\n  }, {\n    dataField: \"viewDetails\",\n    text: \"\"\n  }, {\n    dataField: \"approve\",\n    text: \"\"\n  }, {\n    dataField: \"reject\",\n    text: \"\"\n  }];\n  const expandRow = {\n    renderer: row => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: `This Expand row belongs to rowKey ${row.id}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"You can render anything here, also you can add additional data on every row object\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"expandRow.renderer callback will pass the origin row object to you\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this),\n    showExpandColumn: true\n  };\n  const {\n    SearchBar\n  } = Search;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ApprovalHeader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      style: {\n        width: \"95%\"\n      },\n      className: \"ms-5\",\n      children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n        as: \"h4\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dark\",\n            children: \"EXPENSE APPROVAL\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: /*#__PURE__*/_jsxDEV(ToolkitProvider, {\n          keyField: \"expId\",\n          data: expenseData,\n          columns: columns,\n          search: true,\n          children: props => /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n              id: \"searchbar\",\n              ...props.searchProps,\n              srText: \"Search Expenses :\",\n              placeholder: \"Enter text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(BootstrapTable, {\n              keyField: \"expId\",\n              ...props.baseProps,\n              hover: true // data={data}\n              // columns={columns}\n              //   defaultSorted={defaultSorted}\n              // headerClasses=\"header-class\"\n              //   filter={ filterFactory() }\n              ,\n              pagination: paginationFactory() // expandRow={expandRow}\n              ,\n              noDataIndication: \"No data available in the table for you\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Approvals, \"9DeU6w78bC/sogSsHzwjKe7jH/E=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = Approvals;\nexport default Approvals;\n\nvar _c;\n\n$RefreshReg$(_c, \"Approvals\");","map":{"version":3,"sources":["/Users/rissriva/Desktop/ExpenseManagementSystem/ExpenseManagement/frontend/src/components/Approval/Approvals.js"],"names":["React","Navbar","Card","Button","Badge","Dropdown","Row","Col","BootstrapTable","paginationFactory","ToolkitProvider","Search","ApprovalHeader","useDispatch","useEffect","useSelector","getSubmittedExpenses","updateExpenseState","Approvals","dispatch","then","console","log","catch","viewButton","id","SortCaret","order","column","onApprove","e","payload","target","onReject","expensesSubmitted","content","state","expenseByStatus","user","auth","approveButton","empId","cId","rejectButton","expenseData","map","exp","expData","expId","expenseId","empName","employee","firstName","lastName","date","descpt","description","amt","currency","amount","viewDetails","approve","reject","columns","dataField","text","sort","sortCaret","expandRow","renderer","row","showExpandColumn","SearchBar","width","props","searchProps","baseProps"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SACEC,MADF,EAEEC,IAFF,EAGEC,MAHF,EAIEC,KAJF,EAKEC,QALF,EAMEC,GANF,EAOEC,GAPF,QAQO,iBARP;AASA,OAAOC,cAAP,MAA2B,4BAA3B;AACA,OAAOC,iBAAP,MAA8B,kCAA9B;AACA,OAAOC,eAAP,IAA0BC,MAA1B,QAAwC,gCAAxC;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,oBAAT,EAA+BC,kBAA/B,QAAyD,+BAAzD;;;;AAEA,MAAMC,SAAS,GAAG,MAAM;AAAA;;AAEtB,QAAMC,QAAQ,GAAGN,WAAW,EAA5B;AACAC,EAAAA,SAAS,CAAC,MAAM;AACZK,IAAAA,QAAQ,CAACH,oBAAoB,EAArB,CAAR,CACCI,IADD,CACM,MAAM;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACD,KAHD,EAICC,KAJD,CAIO,MAAM;AACX;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;AACD,KAPD;AAQH,GATQ,EASP,CAACH,QAAD,CATO,CAAT;;AAWA,QAAMK,UAAU,GAAIC,EAAD,IAAQ;AACzB,wBACE,QAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,WAAhB;AAA4B,MAAA,EAAE,EAAEA,EAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAKD,GAND;;AAQA,QAAMC,SAAS,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;AACnC,QAAI,CAACD,KAAL,EACE,oBACE;AAAM,MAAA,SAAS,EAAC,WAAhB;AAAA,6BACE;AAAM,QAAA,KAAK,EAAC,MAAZ;AAAA,4CACc;AAAG,UAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBADd,eAEE;AAAG,UAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,CADF,KASK,IAAIA,KAAK,KAAK,KAAd,EACH,oBACE;AAAM,MAAA,SAAS,EAAC,WAAhB;AAAA,0CACc;AAAG,QAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,cADd,eAEE;AAAM,QAAA,KAAK,EAAC,MAAZ;AAAA,+BACE;AAAG,UAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CADG,KASA,IAAIA,KAAK,KAAK,MAAd,EACH,oBACE;AAAM,MAAA,SAAS,EAAC,WAAhB;AAAA,0CAEE;AAAM,QAAA,KAAK,EAAC,MAAZ;AAAA,+BACE;AAAG,UAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAFF,eAKE;AAAG,QAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,cALF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AASF,WAAO,IAAP;AACD,GA9BD;;AAgCA,QAAME,SAAS,GAAIC,CAAD,IAAO;AACvB,UAAMC,OAAO,GAAG;AACd,gBAAS;AADK,KAAhB;AAGAV,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAH,IAAAA,QAAQ,CAACF,kBAAkB,CAACa,CAAC,CAACE,MAAF,CAASP,EAAV,EAAcM,OAAd,CAAnB,CAAR,CACGX,IADH,CACQ,MAAM;AACVD,MAAAA,QAAQ,CAACH,oBAAoB,EAArB,CAAR,CACGI,IADH,CACQ,MAAM;AACVC,QAAAA,OAAO,CAACC,GAAR,CAAY,6CAAZ;AACD,OAHH,EAIGC,KAJH,CAIS,MAAM;AACXF,QAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACD,OANH;AAOD,KATH,EAUGC,KAVH,CAUS,MAAM;AACX;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACD,KAbH;AAcD,GAnBD;;AAqBA,QAAMW,QAAQ,GAAIH,CAAD,IAAO;AACtB,UAAMC,OAAO,GAAG;AACd,gBAAS;AADK,KAAhB;AAGAV,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAH,IAAAA,QAAQ,CAACF,kBAAkB,CAACa,CAAC,CAACE,MAAF,CAASP,EAAV,EAAcM,OAAd,CAAnB,CAAR,CACGX,IADH,CACQ,MAAM;AACVD,MAAAA,QAAQ,CAACH,oBAAoB,EAArB,CAAR,CACGI,IADH,CACQ,MAAM;AACVC,QAAAA,OAAO,CAACC,GAAR,CAAY,6CAAZ;AACD,OAHH,EAIGC,KAJH,CAIS,MAAM;AACXF,QAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACD,OANH;AAOD,KATH,EAUGC,KAVH,CAUS,MAAM;AACX;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACD,KAbH;AAcD,GAnBD;;AAqBA,QAAM;AAACY,IAAAA,iBAAiB,EAACC;AAAnB,MAA8BpB,WAAW,CAACqB,KAAK,IAAIA,KAAK,CAACC,eAAhB,CAA/C;AACA,QAAM;AAACC,IAAAA;AAAD,MAASvB,WAAW,CAACqB,KAAK,IAAIA,KAAK,CAACG,IAAhB,CAA1B;AAEAlB,EAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYa,OAAZ;;AAEA,QAAMK,aAAa,GAAG,CAACf,EAAD,EAAKgB,KAAL,EAAYC,GAAZ,KAAoB;AACxC,wBACE,QAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,SAAhB;AAA0B,MAAA,OAAO,EAAEb,SAAnC;AAA8C,MAAA,EAAE,EAAEJ,EAAlD;AAAsD,MAAA,QAAQ,EAAEgB,KAAK,KAAKC,GAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAKD,GAND;;AAQA,QAAMC,YAAY,GAAG,CAAClB,EAAD,EAAKgB,KAAL,EAAYC,GAAZ,KAAoB;AACvC,wBACE,QAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,QAAhB;AAAyB,MAAA,OAAO,EAAET,QAAlC;AAA4C,MAAA,EAAE,EAAER,EAAhD;AAAoD,MAAA,QAAQ,EAAEgB,KAAK,KAAKC,GAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAKD,GAND;;AAQA,QAAME,WAAW,GAAGT,OAAO,CAACU,GAAR,CAAaC,GAAD,IAAS;AACvC,UAAMC,OAAO,GAAG;AACdC,MAAAA,KAAK,EAAEF,GAAG,CAACG,SADG;AAEdC,MAAAA,OAAO,EAAEJ,GAAG,CAACK,QAAJ,CAAaC,SAAb,GAAyB,GAAzB,GAA+BN,GAAG,CAACK,QAAJ,CAAaE,QAFvC;AAGdC,MAAAA,IAAI,EAAER,GAAG,CAACQ,IAHI;AAIdC,MAAAA,MAAM,EAAET,GAAG,CAACU,WAJE;AAKdC,MAAAA,GAAG,EAAEX,GAAG,CAACY,QAAJ,GAAe,GAAf,GAAqBZ,GAAG,CAACa,MALhB;AAMdC,MAAAA,WAAW,eAAE;AAAA,kBAASpC,UAAU,CAACsB,GAAD;AAAnB;AAAA;AAAA;AAAA;AAAA,cANC;AAOde,MAAAA,OAAO,eAAE;AAAA,kBAASrB,aAAa,CAACM,GAAG,CAACG,SAAL,EAAgBH,GAAG,CAACK,QAAJ,CAAa1B,EAA7B,EAAiCa,IAAI,CAACb,EAAtC;AAAtB;AAAA;AAAA;AAAA;AAAA,cAPK;AAQdqC,MAAAA,MAAM,eAAE;AAAA,kBAASnB,YAAY,CAACG,GAAG,CAACG,SAAL,EAAgBH,GAAG,CAACK,QAAJ,CAAa1B,EAA7B,EAAiCa,IAAI,CAACb,EAAtC;AAArB;AAAA;AAAA;AAAA;AAAA;AARM,KAAhB;AAUA,WAAOsB,OAAP;AACD,GAZmB,CAApB;AAcA,QAAMgB,OAAO,GAAG,CACd;AACEC,IAAAA,SAAS,EAAE,OADb;AAEEC,IAAAA,IAAI,EAAE,YAFR;AAGEC,IAAAA,IAAI,EAAE,IAHR;AAIEC,IAAAA,SAAS,EAAEzC;AAJb,GADc,EAOd;AACEsC,IAAAA,SAAS,EAAE,SADb;AAEEC,IAAAA,IAAI,EAAE,eAFR;AAGEC,IAAAA,IAAI,EAAE,IAHR;AAIEC,IAAAA,SAAS,EAAEzC;AAJb,GAPc,EAad;AACEsC,IAAAA,SAAS,EAAE,MADb;AAEEC,IAAAA,IAAI,EAAE,cAFR;AAGEC,IAAAA,IAAI,EAAE,IAHR;AAIEC,IAAAA,SAAS,EAAEzC;AAJb,GAbc,EAmBd;AACEsC,IAAAA,SAAS,EAAE,QADb;AAEEC,IAAAA,IAAI,EAAE,aAFR;AAGEC,IAAAA,IAAI,EAAE,IAHR;AAIEC,IAAAA,SAAS,EAAEzC;AAJb,GAnBc,EAyBd;AACEsC,IAAAA,SAAS,EAAE,KADb;AAEEC,IAAAA,IAAI,EAAE,QAFR;AAGEC,IAAAA,IAAI,EAAE,IAHR;AAIEC,IAAAA,SAAS,EAAEzC;AAJb,GAzBc,EA+Bd;AACEsC,IAAAA,SAAS,EAAE,aADb;AAEEC,IAAAA,IAAI,EAAE;AAFR,GA/Bc,EAmCd;AACED,IAAAA,SAAS,EAAE,SADb;AAEEC,IAAAA,IAAI,EAAE;AAFR,GAnCc,EAuCd;AACED,IAAAA,SAAS,EAAE,QADb;AAEEC,IAAAA,IAAI,EAAE;AAFR,GAvCc,CAAhB;AA6CA,QAAMG,SAAS,GAAG;AAChBC,IAAAA,QAAQ,EAAGC,GAAD,iBACR;AAAA,8BACE;AAAA,kBAAK,qCAAoCA,GAAG,CAAC7C,EAAG;AAAhD;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cANF;AAAA;AAAA;AAAA;AAAA;AAAA,YAFc;AAahB8C,IAAAA,gBAAgB,EAAE;AAbF,GAAlB;AAgBA,QAAM;AAAEC,IAAAA;AAAF,MAAgB7D,MAAtB;AAEA,sBACE;AAAA,4BACE,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA,YADF,eAEE,QAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAAE8D,QAAAA,KAAK,EAAE;AAAT,OAAb;AAA+B,MAAA,SAAS,EAAC,MAAzC;AAAA,8BACE,QAAC,IAAD,CAAM,MAAN;AAAa,QAAA,EAAE,EAAC,IAAhB;AAAA,+BACE,QAAC,GAAD;AAAA,iCACE;AAAK,YAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAME,QAAC,IAAD,CAAM,IAAN;AAAA,+BACE,QAAC,eAAD;AACE,UAAA,QAAQ,EAAC,OADX;AAEE,UAAA,IAAI,EAAE7B,WAFR;AAGE,UAAA,OAAO,EAAEmB,OAHX;AAIE,UAAA,MAAM,MAJR;AAAA,oBAMIW,KAAD,iBACC;AAAA,oCACE,QAAC,SAAD;AAAW,cAAA,EAAE,EAAC,WAAd;AAAA,iBAA8BA,KAAK,CAACC,WAApC;AACA,cAAA,MAAM,EAAC,mBADP;AAEA,cAAA,WAAW,EAAC;AAFZ;AAAA;AAAA;AAAA;AAAA,oBADF,eAIE;AAAA;AAAA;AAAA;AAAA,oBAJF,eAKE,QAAC,cAAD;AACE,cAAA,QAAQ,EAAC,OADX;AAAA,iBAEMD,KAAK,CAACE,SAFZ;AAGE,cAAA,KAAK,MAHP,CAIE;AACA;AACA;AACA;AACA;AARF;AASE,cAAA,UAAU,EAAEnE,iBAAiB,EAT/B,CAUE;AAVF;AAWE,cAAA,gBAAgB,EAAC;AAXnB;AAAA;AAAA;AAAA;AAAA,oBALF;AAAA;AAAA;AAAA;AAAA;AAAA;AAPJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cANF;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA,kBADF;AA2CD,CA9OD;;GAAMS,S;UAEaL,W,EA8FmBE,W,EACrBA,W;;;KAjGXG,S;AAgPN,eAAeA,SAAf","sourcesContent":["import React from \"react\";\nimport {\n  Navbar,\n  Card,\n  Button,\n  Badge,\n  Dropdown,\n  Row,\n  Col,\n} from \"react-bootstrap\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\nimport ToolkitProvider, { Search } from \"react-bootstrap-table2-toolkit\";\nimport ApprovalHeader from \"./ApprovalHeader\";\nimport { useDispatch } from \"react-redux\";\nimport { useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { getSubmittedExpenses, updateExpenseState } from \"../../actions/expense.actions\";\n\nconst Approvals = () => {\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n      dispatch(getSubmittedExpenses())\n      .then(() => {\n        console.log(\"Got Submitted Expenses\");\n      })\n      .catch(() => {\n        // openToast();\n        console.log(\"Not got Submitted Expenses\");\n      });\n  },[dispatch])\n\n  const viewButton = (id) => {\n    return (\n      <Button variant=\"secondary\" id={id}>\n        View Invoice\n      </Button>\n    )\n  }\n\n  const SortCaret = (order, column) => {\n    if (!order)\n      return (\n        <span className=\"float-end\">\n          <font color=\"grey\">\n            &nbsp;&nbsp;<i className=\"bi bi-caret-up-fill\"></i>\n            <i className=\"bi bi-caret-down-fill\"></i>\n          </font>\n        </span>\n      );\n    else if (order === \"asc\")\n      return (\n        <span className=\"float-end\">\n          &nbsp;&nbsp;<i className=\"bi bi-caret-up-fill\"></i>\n          <font color=\"grey\">\n            <i className=\"bi bi-caret-down-fill\"></i>\n          </font>\n        </span>\n      );\n    else if (order === \"desc\")\n      return (\n        <span className=\"float-end\">\n          &nbsp;&nbsp;\n          <font color=\"grey\">\n            <i className=\"bi bi-caret-up-fill\"></i>\n          </font>\n          <i className=\"bi bi-caret-down-fill\"></i>\n        </span>\n      );\n    return null;\n  };\n\n  const onApprove = (e) => {\n    const payload = {\n      \"status\":\"APPROVED\"\n    }\n    console.log(\"APPROVED\");\n    dispatch(updateExpenseState(e.target.id, payload))\n      .then(() => {\n        dispatch(getSubmittedExpenses())\n          .then(() => {\n            console.log(\"Approved, and expenses fetched successfully\");\n          })\n          .catch(() => {\n            console.log(\"Unable to fetch expenses\");\n          });\n      })\n      .catch(() => {\n        // openToast();\n        console.log(\"OK\");\n      });\n  };\n\n  const onReject = (e) => {\n    const payload = {\n      \"status\":\"REJECTED\"\n    }\n    console.log(\"REJECTED\");\n    dispatch(updateExpenseState(e.target.id, payload))\n      .then(() => {\n        dispatch(getSubmittedExpenses())\n          .then(() => {\n            console.log(\"Rejected, and expenses fetched successfully\");\n          })\n          .catch(() => {\n            console.log(\"Unable to fetch expenses\");\n          });\n      })\n      .catch(() => {\n        // openToast();\n        console.log(\"OK\");\n      });\n  };\n\n  const {expensesSubmitted:content} = useSelector(state => state.expenseByStatus);\n  const {user} = useSelector(state => state.auth);\n\n  console.log(\"ConTent->\")\n  console.log(content);\n\n  const approveButton = (id, empId, cId) => {\n    return (\n      <Button variant=\"success\" onClick={onApprove} id={id} disabled={empId === cId}>\n        Approve\n      </Button>\n    )\n  }\n\n  const rejectButton = (id, empId, cId) => {\n    return (\n      <Button variant=\"danger\" onClick={onReject} id={id} disabled={empId === cId}>\n        Reject\n      </Button>\n    )\n  }\n\n  const expenseData = content.map((exp) => {\n    const expData = {\n      expId: exp.expenseId,\n      empName: exp.employee.firstName + \" \" + exp.employee.lastName,\n      date: exp.date,\n      descpt: exp.description,\n      amt: exp.currency + \" \" + exp.amount,\n      viewDetails: <center>{viewButton(exp)}</center>,\n      approve: <center>{approveButton(exp.expenseId, exp.employee.id, user.id)}</center>,\n      reject: <center>{rejectButton(exp.expenseId, exp.employee.id, user.id)}</center>,\n    };\n    return expData;\n  });\n\n  const columns = [\n    {\n      dataField: \"expId\",\n      text: \"Expense ID\",\n      sort: true,\n      sortCaret: SortCaret,\n    },\n    {\n      dataField: \"empName\",\n      text: \"Employee Name\",\n      sort: true,\n      sortCaret: SortCaret,\n    },\n    {\n      dataField: \"date\",\n      text: \"Expense Date\",\n      sort: true,\n      sortCaret: SortCaret,\n    },\n    {\n      dataField: \"descpt\",\n      text: \"Description\",\n      sort: true,\n      sortCaret: SortCaret,\n    },\n    {\n      dataField: \"amt\",\n      text: \"Amount\",\n      sort: true,\n      sortCaret: SortCaret,\n    },\n    {\n      dataField: \"viewDetails\",\n      text: \"\",\n    },\n    {\n      dataField: \"approve\",\n      text: \"\",\n    },\n    {\n      dataField: \"reject\",\n      text: \"\",\n    },\n  ];\n\n  const expandRow = {\n    renderer: (row) => (\n      <div>\n        <p>{`This Expand row belongs to rowKey ${row.id}`}</p>\n        <p>\n          You can render anything here, also you can add additional data on\n          every row object\n        </p>\n        <p>\n          expandRow.renderer callback will pass the origin row object to you\n        </p>\n      </div>\n    ),\n    showExpandColumn: true,\n  };\n\n  const { SearchBar } = Search;\n  \n  return (\n    <>\n      <ApprovalHeader />\n      <Card style={{ width: \"95%\" }} className=\"ms-5\">\n        <Card.Header as=\"h4\">\n          <Col>\n            <div className=\"dark\">EXPENSE APPROVAL</div>\n          </Col>\n        </Card.Header>\n        <Card.Body>\n          <ToolkitProvider\n            keyField=\"expId\"\n            data={expenseData}\n            columns={columns}\n            search\n          >\n            {(props) => (\n              <div>\n                <SearchBar id=\"searchbar\" {...props.searchProps} \n                srText=\"Search Expenses :\"\n                placeholder=\"Enter text\"/>\n                <br />\n                <BootstrapTable\n                  keyField=\"expId\"\n                  {...props.baseProps}\n                  hover\n                  // data={data}\n                  // columns={columns}\n                  //   defaultSorted={defaultSorted}\n                  // headerClasses=\"header-class\"\n                  //   filter={ filterFactory() }\n                  pagination={paginationFactory()}\n                  // expandRow={expandRow}\n                  noDataIndication=\"No data available in the table for you\"\n\n                />\n              </div>\n            )}\n          </ToolkitProvider>\n        </Card.Body>\n      </Card>\n    </>\n  );\n};\n\nexport default Approvals;\n"]},"metadata":{},"sourceType":"module"}