{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/* eslint react/prop-types: 0 */\n\n/* eslint react/require-default-props: 0 */\n\n/* eslint no-continue: 0 */\n\n/* eslint no-lonely-if: 0 */\n\n/* eslint class-methods-use-this: 0 */\n\n/* eslint camelcase: 0 */\n\n\nexports.default = function () {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    searchFormatted: false,\n    afterSearch: null,\n    onColumnMatch: null\n  };\n  return function (_, isRemoteSearch, handleRemoteSearchChange) {\n    var SearchContext = _react2.default.createContext();\n\n    var SearchProvider = function (_React$Component) {\n      _inherits(SearchProvider, _React$Component);\n\n      function SearchProvider(props) {\n        _classCallCheck(this, SearchProvider);\n\n        var _this = _possibleConstructorReturn(this, (SearchProvider.__proto__ || Object.getPrototypeOf(SearchProvider)).call(this, props));\n\n        var initialData = props.data;\n\n        if (isRemoteSearch() && _this.props.searchText !== '') {\n          handleRemoteSearchChange(_this.props.searchText);\n        } else {\n          initialData = _this.search(props);\n\n          _this.triggerListener(initialData, true);\n        }\n\n        _this.state = {\n          data: initialData\n        };\n        return _this;\n      }\n\n      _createClass(SearchProvider, [{\n        key: 'getSearched',\n        value: function getSearched() {\n          return this.state.data;\n        }\n      }, {\n        key: 'triggerListener',\n        value: function triggerListener(result, skipInit) {\n          if (options.afterSearch && !skipInit) {\n            options.afterSearch(result);\n          }\n\n          if (this.props.dataChangeListener) {\n            this.props.dataChangeListener.emit('filterChanged', result.length);\n          }\n        }\n      }, {\n        key: 'UNSAFE_componentWillReceiveProps',\n        value: function UNSAFE_componentWillReceiveProps(nextProps) {\n          if (nextProps.searchText !== this.props.searchText) {\n            if (isRemoteSearch()) {\n              handleRemoteSearchChange(nextProps.searchText);\n            } else {\n              var result = this.search(nextProps);\n              this.triggerListener(result);\n              this.setState({\n                data: result\n              });\n            }\n          } else {\n            if (isRemoteSearch()) {\n              this.setState({\n                data: nextProps.data\n              });\n            } else if (!_.isEqual(nextProps.data, this.props.data)) {\n              var _result = this.search(nextProps);\n\n              this.triggerListener(_result);\n              this.setState({\n                data: _result\n              });\n            }\n          }\n        }\n      }, {\n        key: 'search',\n        value: function search(props) {\n          var data = props.data,\n              columns = props.columns;\n          var searchText = props.searchText.toLowerCase();\n          return data.filter(function (row, ridx) {\n            for (var cidx = 0; cidx < columns.length; cidx += 1) {\n              var column = columns[cidx];\n              if (column.searchable === false) continue;\n\n              var targetValue = _.get(row, column.dataField);\n\n              if (column.formatter && options.searchFormatted) {\n                targetValue = column.formatter(targetValue, row, ridx, column.formatExtraData);\n              } else if (column.filterValue) {\n                targetValue = column.filterValue(targetValue, row);\n              }\n\n              if (options.onColumnMatch) {\n                if (options.onColumnMatch({\n                  searchText: searchText,\n                  value: targetValue,\n                  column: column,\n                  row: row\n                })) {\n                  return true;\n                }\n              } else {\n                if (targetValue !== null && typeof targetValue !== 'undefined') {\n                  targetValue = targetValue.toString().toLowerCase();\n\n                  if (targetValue.indexOf(searchText) > -1) {\n                    return true;\n                  }\n                }\n              }\n            }\n\n            return false;\n          });\n        }\n      }, {\n        key: 'render',\n        value: function render() {\n          return _react2.default.createElement(SearchContext.Provider, {\n            value: {\n              data: this.state.data\n            }\n          }, this.props.children);\n        }\n      }]);\n\n      return SearchProvider;\n    }(_react2.default.Component);\n\n    SearchProvider.propTypes = {\n      data: _propTypes2.default.array.isRequired,\n      columns: _propTypes2.default.array.isRequired,\n      searchText: _propTypes2.default.string,\n      dataChangeListener: _propTypes2.default.object\n    };\n    return {\n      Provider: SearchProvider,\n      Consumer: SearchContext.Consumer\n    };\n  };\n};","map":{"version":3,"sources":["/Users/rissriva/Documents/GitHub/Expense-Management-Software-React-App/node_modules/react-bootstrap-table2-toolkit/lib/src/search/context.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","options","arguments","undefined","searchFormatted","afterSearch","onColumnMatch","_","isRemoteSearch","handleRemoteSearchChange","SearchContext","createContext","SearchProvider","_React$Component","_this","getPrototypeOf","initialData","data","searchText","search","triggerListener","state","getSearched","result","skipInit","dataChangeListener","emit","UNSAFE_componentWillReceiveProps","nextProps","setState","isEqual","_result","columns","toLowerCase","filter","row","ridx","cidx","column","searchable","targetValue","get","dataField","formatter","formatExtraData","filterValue","toString","indexOf","render","createElement","Provider","children","Component","propTypes","array","isRequired","string","object","Consumer"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /* eslint react/prop-types: 0 */\n/* eslint react/require-default-props: 0 */\n/* eslint no-continue: 0 */\n/* eslint no-lonely-if: 0 */\n/* eslint class-methods-use-this: 0 */\n/* eslint camelcase: 0 */\n\n\nexports.default = function () {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    searchFormatted: false,\n    afterSearch: null,\n    onColumnMatch: null\n  };\n  return function (_, isRemoteSearch, handleRemoteSearchChange) {\n    var SearchContext = _react2.default.createContext();\n\n    var SearchProvider = function (_React$Component) {\n      _inherits(SearchProvider, _React$Component);\n\n      function SearchProvider(props) {\n        _classCallCheck(this, SearchProvider);\n\n        var _this = _possibleConstructorReturn(this, (SearchProvider.__proto__ || Object.getPrototypeOf(SearchProvider)).call(this, props));\n\n        var initialData = props.data;\n        if (isRemoteSearch() && _this.props.searchText !== '') {\n          handleRemoteSearchChange(_this.props.searchText);\n        } else {\n          initialData = _this.search(props);\n          _this.triggerListener(initialData, true);\n        }\n        _this.state = { data: initialData };\n        return _this;\n      }\n\n      _createClass(SearchProvider, [{\n        key: 'getSearched',\n        value: function getSearched() {\n          return this.state.data;\n        }\n      }, {\n        key: 'triggerListener',\n        value: function triggerListener(result, skipInit) {\n          if (options.afterSearch && !skipInit) {\n            options.afterSearch(result);\n          }\n          if (this.props.dataChangeListener) {\n            this.props.dataChangeListener.emit('filterChanged', result.length);\n          }\n        }\n      }, {\n        key: 'UNSAFE_componentWillReceiveProps',\n        value: function UNSAFE_componentWillReceiveProps(nextProps) {\n          if (nextProps.searchText !== this.props.searchText) {\n            if (isRemoteSearch()) {\n              handleRemoteSearchChange(nextProps.searchText);\n            } else {\n              var result = this.search(nextProps);\n              this.triggerListener(result);\n              this.setState({\n                data: result\n              });\n            }\n          } else {\n            if (isRemoteSearch()) {\n              this.setState({ data: nextProps.data });\n            } else if (!_.isEqual(nextProps.data, this.props.data)) {\n              var _result = this.search(nextProps);\n              this.triggerListener(_result);\n              this.setState({\n                data: _result\n              });\n            }\n          }\n        }\n      }, {\n        key: 'search',\n        value: function search(props) {\n          var data = props.data,\n              columns = props.columns;\n\n          var searchText = props.searchText.toLowerCase();\n          return data.filter(function (row, ridx) {\n            for (var cidx = 0; cidx < columns.length; cidx += 1) {\n              var column = columns[cidx];\n              if (column.searchable === false) continue;\n              var targetValue = _.get(row, column.dataField);\n              if (column.formatter && options.searchFormatted) {\n                targetValue = column.formatter(targetValue, row, ridx, column.formatExtraData);\n              } else if (column.filterValue) {\n                targetValue = column.filterValue(targetValue, row);\n              }\n              if (options.onColumnMatch) {\n                if (options.onColumnMatch({\n                  searchText: searchText,\n                  value: targetValue,\n                  column: column,\n                  row: row\n                })) {\n                  return true;\n                }\n              } else {\n                if (targetValue !== null && typeof targetValue !== 'undefined') {\n                  targetValue = targetValue.toString().toLowerCase();\n                  if (targetValue.indexOf(searchText) > -1) {\n                    return true;\n                  }\n                }\n              }\n            }\n            return false;\n          });\n        }\n      }, {\n        key: 'render',\n        value: function render() {\n          return _react2.default.createElement(\n            SearchContext.Provider,\n            { value: { data: this.state.data } },\n            this.props.children\n          );\n        }\n      }]);\n\n      return SearchProvider;\n    }(_react2.default.Component);\n\n    SearchProvider.propTypes = {\n      data: _propTypes2.default.array.isRequired,\n      columns: _propTypes2.default.array.isRequired,\n      searchText: _propTypes2.default.string,\n      dataChangeListener: _propTypes2.default.object\n    };\n\n\n    return {\n      Provider: SearchProvider,\n      Consumer: SearchContext.Consumer\n    };\n  };\n};"]},"metadata":{},"sourceType":"script"}